<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>旋转木马轮播图</title>
    <link rel="stylesheet" href="css/css.css"/>
    <script src="../../useker.animate3.js"></script>

</head>
<body>
<div class="wrap" id="wrap">
    <div class="slide" id="slide">
        <ul>
            <li>
                <a href="#"><img src="images/slidepic1.jpg" alt=""/></a>
            </li>
            <li>
                <a href="#"><img src="images/slidepic2.jpg" alt=""/></a>
            </li>
            <li>
                <a href="#"><img src="images/slidepic3.jpg" alt=""/></a>
            </li>
            <li>
                <a href="#"><img src="images/slidepic4.jpg" alt=""/></a>
            </li>
            <li>
                <a href="#"><img src="images/slidepic5.jpg" alt=""/></a>
            </li>
        </ul>
        <div class="arrow" id="arrow">
            <a href="javascript:;" class="prev"></a>
            <a href="javascript:;" class="next"></a>
        </div>
    </div>

</div>
</body>
</html>

<script>

    var jsonData = [
        {   //  1
            width:400,
            top:20,
            left:50,
            opacity:0.2,
            zIndex:2
        },
        {  // 2
            width:600,
            top:70,
            left:0,
            opacity:.80,
            zIndex:3
        },
        {   // 3
            width:800,
            top:100,
            left:200,
            opacity:1,
            zIndex:4
        },
        {  // 4
            width:600,
            top:70,
            left:600,
            opacity:.80,
            zIndex:3
        },
        {   //5
            width:400,
            top:20,
            left:750,
            opacity:.20,
            zIndex:2
        }
    ];


  function loadImg(){
      var olis=document.querySelectorAll('#wrap li');
      for(var i=0;i<jsonData.length;i++){
          animate(olis[i],jsonData[i],function(){
           // 动画执行完成后,才会被触发
              nextFlag=true
          })
      }
  }
    loadImg();

    var  wrap=document.getElementById('wrap');
    wrap.onmouseenter=function(){
        var arrow=document.getElementById('arrow')
        animate(arrow,{"opacity":1})

    }
    wrap.onmouseleave=function(){
        var arrow=document.getElementById('arrow')
        animate(arrow,{"opacity":0})
    }

    // 左右点击事件
    document.querySelector("#arrow .prev").onclick=function(){

//节流阀
        if(nextFlag){
            nextFlag=false;

            jsonData.unshift(jsonData.pop());

            loadImg();
        }
    }





    var nextFlag=true;

    document.querySelector("#arrow .next").onclick=function(){

        if(nextFlag==true){
            nextFlag=false;

            jsonData.push(jsonData.shift());
            loadImg();
        }
    }

</script>